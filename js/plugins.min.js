if(!(window.console&&console.log)){(function(){var noop=function(){};var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"];var length=methods.length;var console=window.console={};while(length--){console[methods[length]]=noop}})()}jQuery.namespace=function(){var a=arguments,o=null,i,j,d;for(i=0;i<a.length;i=i+1){d=a[i].split(".");o=window;for(j=0;j<d.length;j=j+1){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}return o};jQuery.namespace("jQuery.tn");var tnAffixEnabled=true;jQuery.tn.refreshList=function(elems){var is_touch_device="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;if(typeof elems==="string")elems=[elems];for(key in elems){switch(elems[key]){case"tooltip":if(!is_touch_device)$("a[rel=twipsy]").each(function(){$(this).on("click",function(){$(this).tooltip("hide")}).tooltip()});break;case"popover":if(!is_touch_device)$("a[rel=popover]").popover();break;case"rating":$("span.rating > input").rating({required:true,readOnly:true});break;case"app-sortable":$("#userapp ul.items").sortable(sortableOptions);break;case"app-more":break;case"sel-more":break;case"disc-more":break;case"net-more":break;case"addthis":$(".addthis_toolbox").addThisWrapper();break;case"dropdown":$(".dropdown-toggle").on("click.dropdown.data-api",function(){$(".view").removeClass("active");$(this).parents(".view").addClass("active")});break;case"chosen":break;case"ctncut":break;case"redactor":break;case"oembed":$("div.embed-media > a.oembed").tnembed();break;case"oembed-disc":$("div.embed-media > a.oembed, a.oembed.oembed-selection").tnembed(502);break;case"oembed-sel":$(".seo-block a.oembed.oembed-selection").tnembed();$("#objList > .items > .view:first-child a.oembed.oembed-selection").tnembed();$("a.oembed.oembed-selection").scrollembed();break;case"pre-update":if(!is_touch_device)$("a[rel=twipsy]").tooltip("hide");$("a[rel=popover]").popover("hide");break;case"affix":break;case"suggestion-form":break;case"fb-like":try{FB.XFBML.parse()}catch(ex){}break}}};jQuery.tn.jsonAjaxUpdate=function(data,status,xhr){var votes=false,actions=false,suggested=undefined,obj=undefined,parent=undefined,id=undefined,parentClass=undefined,socialActions=false,isForMe=$("#forme").hasClass("active");if(data.code!==undefined&&data.code===401){$("#signin").modal("show")}if(data.headline!==undefined){obj=data.headline;parent=obj.source.source;id="#n"+obj.id;parentClass=".n"+parent.id;votes=true;actions=true;suggested=obj.is_suggested}else if(data.suggestion!==undefined){obj=data.suggestion;parent=obj.author.profile!==undefined?obj.author.profile:obj.author.external_author.profile.profile;id="#s"+obj.id;parentClass=".s"+parent.id;votes=true;actions=true;suggested=obj.is_suggested}else if(data.profile!==undefined){parent=data.profile;parentClass=".s"+parent.id;actions=true}else if(data.discussion!==undefined){obj=data.discussion;id="#d"+obj.id;votes=true;actions=true;suggested=obj.is_suggested}else if(data.site!==undefined){obj=data.site;id="#a"+obj.id;votes=true;actions=true}if(votes){if(obj.is_upvoted){$(id+" .obj-type-vote-up").addClass("obj-type-vote-up-selected");$(id+" .obj-type-vote-down").removeClass("obj-type-vote-down-selected");$(id+" .view-card-actions-vote-up").addClass("view-card-actions-vote-up-selected");$(id+" .view-card-actions-vote-down").removeClass("view-card-actions-vote-down-selected");$(".extContainer .ext-action-like").addClass("ext-action-active");$(".extContainer .ext-action-notlike").removeClass("ext-action-active");socialActions=true}else if(obj.is_downvoted){$(id+" .obj-type-vote-up").removeClass("obj-type-vote-up-selected");$(id+" .obj-type-vote-down").addClass("obj-type-vote-down-selected");$(id+" .view-card-actions-vote-up").removeClass("view-card-actions-vote-up-selected");$(id+" .view-card-actions-vote-down").addClass("view-card-actions-vote-down-selected");$(".extContainer .ext-action-like").removeClass("ext-action-active");$(".extContainer .ext-action-notlike").addClass("ext-action-active")}}if(actions){var show,hide;if(parent!==undefined){if(parent.is_followed){show=".nav-view-menu-unfollow";hide=".nav-view-menu-follow"}else{show=".nav-view-menu-follow";hide=".nav-view-menu-unfollow"}$(parentClass+" "+hide).hide();$(parentClass+" "+show).show()}if(obj!==undefined){if(isForMe&&obj.is_downvoted||!obj.is_visible||$.isEmptyObject(obj.needs)){if(!$(id).hasClass("view-card-donthide"))$(id).fadeOut(function(){})}else if(isForMe&&obj.is_upvoted)$(id).show();if(!$.isEmptyObject(obj.needs)&&$(id).hasClass("need-border")){var need_id=obj.needs[0].need;for(var i=1;i<=20;i++)$(id).removeClass("need"+i);$(id).addClass("need"+need_id)}if(obj.is_pinned!==undefined){if(obj.is_pinned){show=".nav-view-menu-unpin";hide=".nav-view-menu-pin";socialActions=true}else{show=".nav-view-menu-pin";hide=".nav-view-menu-unpin"}$(id+" "+hide).hide();$(id+" "+show).show()}if(obj.is_followed!==undefined){if(obj.is_followed){show=".nav-view-menu-unfollow";hide=".nav-view-menu-follow"}else{show=".nav-view-menu-follow";hide=".nav-view-menu-unfollow"}$(id+" "+hide).hide();$(id+" "+show).show()}}}if(suggested!==undefined){if(suggested){var label=$(id+" .nav-view-menu-suggest > span.nav-view-menu-suggest-label");$(id+" .nav-view-menu-suggest").tooltip("disable").parent().addClass("selected");$(label).text($(label).data("active"));socialActions=true}else{var label=$(id+" .nav-view-menu-suggest > span.nav-view-menu-suggest-label");$(id+" .nav-view-menu-suggest").tooltip("enable").parent().removeClass("selected");$(label).text($(label).data("inactive"))}}if(socialActions){var img=$(id+" .obj-social > img.me"),txt=$(id+" .obj-social > span"),num=$(id+" .obj-social .num"),imgs=$(id+" .obj-social > img");if(img.length&&!img.is(":visible")){img.show("fast");if(imgs.length>3)imgs.not(".me").last().hide("fast");num.text(parseInt(num.text())+1);txt.show()}}jQuery.tn.learnProxy(obj)};jQuery.tn.analytics=function(action,params){var universalGA=false,classicGA=false,classicParams,universalParams;switch(action){case"fb-like":classicParams=["_trackSocial","facebook","like",params];universalParams={hitType:"social",socialNetwork:"facebook",socialAction:"like",socialTarget:"https://www.facebook.com/pages/Theneeds/205467926188696"};break;case"fb-fangate-like":classicParams=["_trackEvent","facebook","fangate","like"];universalParams={hitType:"event",eventCategory:"facebook",eventAction:"fangate",eventLabel:"like"};break;case"fb-fangate-dismiss":classicParams=["_trackEvent","facebook","fangate","dismiss"];universalParams={hitType:"event",eventCategory:"facebook",eventAction:"fangate",eventLabel:"dismiss"};break;case"fb-fangate-open":classicParams=["_trackEvent","facebook","fangate","open"];universalParams={hitType:"event",eventCategory:"facebook",eventAction:"fangate",eventLabel:"open",nonInteraction:1};break;case"fb-fangate-close":classicParams=["_trackEvent","facebook","fangate","close"];universalParams={hitType:"event",eventCategory:"facebook",eventAction:"fangate",eventLabel:"close",nonInteraction:1};break;case"outbound":break;case"iframe-pageview":universalParams={hitType:"pageview",page:params,title:"(within iframe)"};break;case"action-like":universalParams={hitType:"event",eventCategory:"action",eventAction:"like",eventLabel:params};break;case"action-notlike":universalParams={hitType:"event",eventCategory:"action",eventAction:"notlike",eventLabel:params};break;case"action-share-extra":universalParams={hitType:"event",eventCategory:"action",eventAction:"share extra",eventLabel:params};break;case"news-open":universalParams={hitType:"event",eventCategory:"news",eventAction:"open",eventLabel:params,nonInteraction:1};break;case"news-read":universalParams={hitType:"event",eventCategory:"news",eventAction:"read",eventLabel:params};break;case"news-share":universalParams={hitType:"event",eventCategory:"news",eventAction:"share",eventLabel:params};break;case"news-image":universalParams={hitType:"event",eventCategory:"news",eventAction:"image",eventLabel:params};break;case"signup-button":universalParams={hitType:"event",eventCategory:"signup",eventAction:"button",eventLabel:params};break;case"signup-button-seo":universalParams={hitType:"event",eventCategory:"signup",eventAction:"button-seo",eventLabel:params};break;case"signup-login-social":universalParams={hitType:"event",eventCategory:"signup",eventAction:"login social",eventLabel:params};break;case"signup-signup-social":universalParams={hitType:"event",eventCategory:"signup",eventAction:"signup social",eventLabel:params};break;case"signup-int-side-select":universalParams={hitType:"event",eventCategory:"signup",eventAction:"interest side select",eventLabel:params};break;case"signup-int-side-signup":universalParams={hitType:"event",eventCategory:"signup",eventAction:"interest side signup",eventLabel:params};break;case"signup-int-page-select":universalParams={hitType:"event",eventCategory:"signup",eventAction:"interest page select",eventLabel:params};break;case"signup-int-page-signup":universalParams={hitType:"event",eventCategory:"signup",eventAction:"interest page signup",eventLabel:params};break;default:return}if(typeof ga==="function"){universalGA=true}if(typeof _gaq!=="undefined"&&typeof _gaq.push==="function"){classicGA=true}if(universalGA){ga("send",universalParams)}if(classicGA){_gaq.push(classicParams)}};jQuery.tn.learnProxy=function(obj){if(typeof obj==="undefined")return;var learn=typeof obj.learn!=="undefined"?obj.learn:undefined,modal=$("#learn-modal");if(learn!==undefined){if(learn.action!==undefined){modal.learn(learn.action,learn.obj)}else if(learn.url!==undefined){jQuery.ajax({type:"GET",url:learn.url,cache:false,success:function(data,status,xhr){if(xhr.getResponseHeader("content-type")==="application/json"){var obj=undefined;if(data.headline!==undefined){obj=data.headline}else if(data.suggestion!==undefined){obj=data.suggestion}jQuery.tn.learnProxy(obj)}}})}}};jQuery.tn.bindAddthis=function(){$("body").on("click","a.addthis",function(){$(".dropdown.open .dropdown-toggle").dropdown("toggle");var link=$(this).attr("href").split("_",2);$(link[0]+" a.addthis_button_"+link[1].replace(/-/g,"_")).trigger("click");return false})};jQuery.tn.affix=function(cmd){tnAffixEnabled=cmd==="disable"?false:true};jQuery.tn.needShowSuggestions=function(){var max=360-$("#need-suggestion-big").outerHeight(true);var h=0;$("#need-suggestion-big div.item").each(function(){var v=$(this).is(":visible");$(this).show(0,function(){if($(this).height()>h){h=$(this).height();$("#need-suggestion-big").height(h);max=360-$("#need-suggestion-big").outerHeight(true)}$(this).attr("style","")})});var v=$(".need-suggestion-list").is(":visible");$("#suggestionPortletNeed").find(".need-content").removeClass("bg-hover");$(".need-suggestion-list").show();$("#suggestions .view").each(function(){if((hh=$(this).outerHeight(true))<=max){$(this).css("visibility","visible");max=max-hh}else $(this).addClass("hide")});if(!v){$("#need-suggestion-big").find(".active .media-open").trigger("click")}};jQuery.tn.needShowSelections=function(){$(".selection .title").each(function(){});$("#need-selection-big div.item").each(function(){var v=$(this).is(":visible");$(this).show(0,function(){if($(this).find(".title").height()<=40){$(this).find(".selection-content span.hide").show()}$(this).attr("style","")})});$(".selection-content").each(function(){})};jQuery.tn.needShowDiscussions=function(){};jQuery.tn.formBeforeValidate=function(form){if(form.hasClass("form-loading"))return 0;form.addClass("form-loading");formAjaxUpdateTimer=setTimeout(function(){try{$("#loading").modal("show")}catch(err){}},4e3);return true};jQuery.tn.formAfterValidate=function(form,data,hasError){return jQuery.tn.formAfterAjaxError(form,data,hasError)};jQuery.tn.formAfterAjaxError=function(form,data,hasError){window.clearTimeout(formAjaxUpdateTimer);form.removeClass("form-loading");return true};jQuery.tn.formAfterAjaxSuccess=function(form,data,hasError){window.clearTimeout(formAjaxUpdateTimer);form.removeClass("form-loading");try{jQuery.tn.refreshList(["pre-update"]);$("#loading").modal("hide")}catch(err){}return true};jQuery.tn.discussionAjaxUpdate=function(data,status,xhr){if(xhr.getResponseHeader("content-type")==="application/json")jQuery.tn.jsonAjaxUpdate(data,status,xhr);else{var ctn=$("#discussionAll","<div>"+data+"</div>");if(ctn)$("#discussionAll").replaceWith(ctn);jQuery.tn.refreshList(["redactor","oembed","addthis"]);$(".discussion-comment-form form").yiiactiveform({validateOnChange:false,validateOnSubmit:true,beforeValidate:jQuery.tn.formBeforeValidate,afterValidate:jQuery.tn.commentEditAfterValidate,attributes:[{id:"DiscussionComment_title",inputID:"DiscussionComment_title",errorID:"DiscussionComment_title_em_",model:"DiscussionComment",name:"DiscussionComment[title]",enableAjaxValidation:true,inputContainer:"div.control-group"},{id:"DiscussionComment_text",inputID:"DiscussionComment_text",errorID:"DiscussionComment_text_em_",model:"DiscussionComment",name:"DiscussionComment[text]",enableAjaxValidation:true,inputContainer:"div.control-group"}]});$(".commentReply.discussionCommentL2 form").yiiactiveform({validateOnChange:false,validateOnSubmit:true,beforeValidate:jQuery.tn.formBeforeValidate,afterValidate:jQuery.tn.commentNewAfterValidate,attributes:[{id:"DiscussionComment_title",inputID:"DiscussionComment_title",errorID:"DiscussionComment_title_em_",model:"DiscussionComment",name:"DiscussionComment[title]",enableAjaxValidation:true,inputContainer:"div.control-group"},{id:"DiscussionComment_text",inputID:"DiscussionComment_text",errorID:"DiscussionComment_text_em_",model:"DiscussionComment",name:"DiscussionComment[text]",enableAjaxValidation:true,inputContainer:"div.control-group"}]})}};jQuery.tn.commentEditAfterValidate=function(form,data,hasError){if(!hasError){var id=$(form).parents(".discussion-comment").attr("id");jQuery.ajax({type:"POST",url:$(form).attr("action"),cache:false,data:$(form).serialize(),success:function(html){jQuery.tn.formAfterAjaxSuccess(form,data,hasError);$("#"+id+" .discussion-comment-view").html($("#"+id+" .discussion-comment-view","<div>"+html+"</div>").html()).find(".commentEdit").trigger("click")},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown);jQuery.tn.formAfterAjaxError(form,data,hasError)}})}else jQuery.tn.formAfterAjaxSuccess(form,data,hasError);return false};jQuery.tn.commentNewAfterValidate=function(form,data,hasError){if(!hasError){var id=$(form).parents(".discussion-comment").attr("id");jQuery.ajax({type:"POST",url:$(form).attr("action"),cache:false,data:$(form).serialize(),success:id===undefined?function(html,status,xhr){jQuery.tn.formAfterAjaxSuccess(form,data,hasError);jQuery.tn.discussionAjaxUpdate(html,status,xhr)}:function(html){jQuery.tn.formAfterAjaxSuccess(form,data,hasError);$(form).parents(".boxForm").hide();$(form)[0].reset();$(form).find(".redactor").setCode("");$("#"+id+" + .discussionCommentL2Container").html($("#"+id+" + .discussionCommentL2Container","<div>"+html+"</div>").html());jQuery.tn.refreshList(["redactor","oembed","addthis"])},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown);jQuery.tn.formAfterAjaxError(form,data,hasError)}})}else jQuery.tn.formAfterAjaxSuccess(form,data,hasError);return false};jQuery.tn.inviteBeforeValidate=function(form){$(form).find(".msg").text("");return jQuery.tn.formBeforeValidate(form)};jQuery.tn.inviteAfterValidate=function(form,data,hasError){if(!hasError){jQuery.ajax({type:"POST",url:$(form).attr("action"),cache:false,data:$(form).serialize(),success:function(html){jQuery.tn.formAfterAjaxSuccess(form,data,hasError);$("#invite-widget").replaceWith(html);$("#invite-form").yiiactiveform({validateOnChange:false,validateOnSubmit:true,beforeValidate:jQuery.tn.inviteBeforeValidate,afterValidate:jQuery.tn.inviteAfterValidate,attributes:[{id:"Invite_name",inputID:"Invite_name",errorID:"Invite_name_em_",model:"Invite",name:"Invite[name]",enableAjaxValidation:true,inputContainer:"div.control-group"},{id:"Invite_emails",inputID:"Invite_emails",errorID:"Invite_emails_em_",model:"Invite",name:"Invite[emails]",enableAjaxValidation:true,inputContainer:"div.control-group"}]})},error:function(){jQuery.tn.formAfterAjaxError(form,data,hasError)}})}else jQuery.tn.formAfterAjaxSuccess(form,data,hasError);return false};jQuery.fn.html5form=function(){return this.selector};jQuery.fn.hoverWithMenu=function(){var selector=this.selector;var is_touch_device="ontouchstart"in document.documentElement;if(is_touch_device)return;$(selector).parent().on("mouseenter",selector+" .view",function(){if($(selector).find(".dropdown.open").length==0){$(selector+" .view").removeClass("active");$(this).addClass("active")}});$(selector).parent().on("mouseleave",selector+" .view",function(){if($(selector).find(".dropdown.open").length==0)$(selector+" .view").removeClass("active")});$("html").on("click.dropdown.data-api",function(){$(selector+" .view").removeClass("active")});$(".dropdown-toggle").on("click.dropdown.data-api",function(){$(".view").removeClass("active");$(this).parents(".view").addClass("active")})};jQuery.fn.ctncut=function(option){var selector=this.selector;if(option===undefined){if(!$(selector).find("img").length){$(selector).ctncut("init");$(selector).find("img").one("load",function(){$(selector).ctncut("init")}).each(function(){if(this.complete)$(this).load()})}}else if(option=="init")$(selector).each(function(){$(this).addClass("ctncut-init");var view=$(this).find(".ctncut-view");var text=$(view).find(".ctncut-text");if(text.height()>view.height())$(this).addClass("ctncut-close")});else if(option=="open")$(selector).addClass("ctncut-open");else if(option=="close")$(selector).removeClass("ctncut-open")};jQuery.fn.tnembed=function(maxWidth,autoplay){autoplay=typeof autoplay!=="undefined"?autoplay:0;return this.each(function(){var a=$(this);var w=typeof maxWidth!=="undefined"?maxWidth:a.parent().width();a.embedly({key:"64849cae168c46f98f71845c3355e320",query:{maxwidth:w}})})};jQuery.fn.suggestionOpenMedia=function(id,close,maxWidth,autoplay){maxWidth=typeof maxWidth!=="undefined"?maxWidth:512;autoplay=typeof autoplay!=="undefined"?autoplay:1;$("#smedia"+id+" a.oembed").tnembed(maxWidth,autoplay);$("#smedia"+id).toggleClass("open").toggle();$(this).find(".action").toggle();$(this).parents(".view").find(".obj-details .action").toggle();if(close){$(this).parents(".view").find("p, p+span").toggle();$(this).parents(".need-content").toggleClass("bg-hover").find(".need-suggestion-list").toggle()}};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};var Learn=function(element,options){this.options=options;this.$element=$(element)};Learn.prototype={constructor:Learn,show:function(){return this.$element.modal("show")},sfollow:function(obj){var need=this.getNeed("everywhere");this.setSentence("You are already following",obj,"in other Needs");this.setQuestion("Would you like to follow",obj," everywhere");this.setActionYes("follow",need,obj.actionYesUrl,need.image);this.setActionNo("only follow in",this.getNeed());return this.show()},sunfollow:function(obj){var need=this.getNeed("everywhere");this.setSentence("You have already unfollowed",obj,"in other Needs");this.setQuestion("Would you like to unfollow",obj," everywhere");this.setActionYes("unfollow",need,obj.actionYesUrl,need.image);this.setActionNo("only unfollow in",this.getNeed());return this.show()},follow:function(obj){var need=this.getNeed();this.setSentence("It looks like you are interested in following",obj);this.setQuestion("Would you like to follow",obj," in "+need.name);this.setActionYes("follow in",need,obj.actionYesUrl,need.image);this.setActionNo("don't follow it");return this.show()},unfollow:function(obj){var need=this.getNeed();this.setSentence("It looks like you are not interested in following",obj);this.setQuestion("Would you like to unfollow",obj," in "+need.name);this.setActionYes("unfollow in",need,obj.actionYesUrl,need.image);this.setActionNo("keep following it");return this.show()},iadd:function(obj){var need=this.getNeed();this.setSentence("It looks like you are interested in",obj);this.setQuestion("Would you like us to add",obj," to your interests");this.setActionYes("add",obj,obj.actionYesUrl,need.image);this.setActionNo("don't add it");return this.show()},kadd:function(obj){this.setSentence("It looks like you are interested in",obj);this.setQuestion("Would you like us to show you more",obj,"-related content");this.setActionYes("boost",obj,obj.actionYesUrl,obj.image);this.setActionNo("ignore",obj,obj.actionNoUrl,obj.imageNo);return this.show()},kdel:function(obj){this.setSentence("It looks like you are not interested in",obj);this.setQuestion("Would you like us to show you less",obj,"-related content");this.setActionYes("penalize",obj,obj.actionYesUrl,obj.image);this.setActionNo("ignore",obj,obj.actionNoUrl,obj.imageNo);return this.show()},setSentence:function(txtBefore,obj,txtAfter){this.$element.find(".learn-sentence").text(txtBefore+" "+obj.name+(typeof txtAfter!=="undefined"?" "+txtAfter:"")+".")},setQuestion:function(txtBefore,obj,txtAfter){this.$element.find(".learn-question").html(txtBefore+" "+obj.html+(typeof txtAfter!=="undefined"?txtAfter:"")+"?")},setActionYes:function(txt,obj,url,image){var el=this.$element.find(".learn-action-yes > a"),html=" Yes, "+txt;if(typeof url!=="undefined")el.attr("href",url).addClass("ajaxu");else el.attr("href","#").removeClass("ajaxu")},setActionNo:function(txt,obj,url,image){var el=this.$element.find(".learn-action-no > a"),html=" No, "+txt;if(typeof url!=="undefined")el.attr("href",url).addClass("ajaxu");else el.attr("href","#").removeClass("ajaxu")},getNeed:function(desc){var b=typeof desc==="undefined",need=$("#nav-needs > .active > a"),name=b?need.data("title"):desc,image=b?need.html():'<img class="tn32" src="/tn/themes/tnb/images/logo_tn.png"/>';return{name:name,image:image,imageNo:""}}};$.fn.learn=function(action,obj){return this.each(function(){var $this=$(this),data=$this.data("learn"),options=$.extend({},$.fn.learn.defaults,typeof action=="object"&&action);if(!data)$this.data("learn",data=new Learn(this,options));if(typeof action=="string")data[action](obj)})};$.fn.learn.defaults={backdrop:true,show:true};$.fn.learn.Constructor=Learn(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{s=decodeURIComponent(s.replace(pluses," "));return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setTime(+t+days*864e5)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split("; "):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie}}return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false}$.cookie(key,"",$.extend({},options,{expires:-1}));return!$.cookie(key)}}));!function(e,t,n){"use strict";var r,a,l,i={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0},o=e(t),c=[],u=0;e.scrollDepth=function(h){function p(e,t,n,i){l?(dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:!0}),h.pixelDepth&&arguments.length>2&&n>u&&(u=n,dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:f(n),eventValue:1,eventNonInteraction:!0})),h.userTiming&&arguments.length>3&&dataLayer.push({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:i})):(r&&(ga("send","event","Scroll Depth",e,t,1,{nonInteraction:1}),h.pixelDepth&&arguments.length>2&&n>u&&(u=n,ga("send","event","Scroll Depth","Pixel Depth",f(n),1,{nonInteraction:1})),h.userTiming&&arguments.length>3&&ga("send","timing","Scroll Depth",e,i,t)),a&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,!0]),h.pixelDepth&&arguments.length>2&&n>u&&(u=n,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",f(n),1,!0])),h.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,i,t,100])))}function g(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function s(t,n,r){e.each(t,function(t,a){-1===e.inArray(t,c)&&n>=a&&(p("Percentage",t,n,r),c.push(t))})}function v(t,n,r){e.each(t,function(t,a){-1===e.inArray(a,c)&&e(a).length&&n>=e(a).offset().top&&(p("Elements",a,n,r),c.push(a))})}function f(e){return(250*Math.floor(e/250)).toString()}function m(e,t){var n,r,a,l=null,i=0,o=function(){i=new Date,l=null,a=e.apply(n,r)};return function(){var c=new Date;i||(i=c);var u=t-(c-i);return n=this,r=arguments,0>=u?(clearTimeout(l),l=null,i=c,a=e.apply(n,r)):l||(l=setTimeout(o,u)),a}}var D=+new Date;h=e.extend({},i,h),e(n).height()<h.minHeight||("function"==typeof ga&&(r=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(a=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(l=!0),p("Percentage","Baseline"),o.on("scroll.scrollDepth",m(function(){var r=e(n).height(),a=t.innerHeight?t.innerHeight:o.height(),l=o.scrollTop()+a,i=g(r),u=+new Date-D;return c.length>=4+h.elements.length?void o.off("scroll.scrollDepth"):(h.elements&&v(h.elements,l,u),void(h.percentage&&s(i,l,u)))},500)))}}(jQuery,window,document);(function($,window,document,undefined){var Scroller=function(iframes){this.init(iframes)};Scroller.prototype.init=function(iframes){this.data=[];iframes.each($.proxy(function(i,elem){var $elem=$(elem);this.add($elem)},this))};Scroller.prototype.add=function($elem){var t=$elem.parent().offset().top,w=$elem.parent().width();this.data.push({top:t,width:w,$elem:$elem})};Scroller.prototype.scrolled=function(){var $window=$(window);var t=$window.scrollTop();var b=t+$window.height();newdata=[];$.map(this.data,function(obj,i){var p=0;if(obj.top<b+100){obj.$elem.tnembed(obj.width)}else{newdata.push(obj)}});this.data=newdata};Scroller.prototype.listen=function($elem,player){var $window=$(window);$window.on("scroll",$.proxy(function(){if(this.data.length===0){return false}this.scrolled()},this))};$.fn.scrollembed=function(){var scroller=new Scroller(this);scroller.listen();return this}})(jQuery,window,document);!function($){$(function(){"use strict";$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},name;for(name in transEndEventNames){if(el.style[name]!==undefined){return transEndEventNames[name]}}}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);!function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);e&&e.preventDefault();$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent());$parent.trigger(e=$.Event("close"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.trigger("closed").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement()};$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");if(!data)$this.data("alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})};$.fn.alert.Constructor=Alert;$(function(){$("body").on("click.alert.data-api",dismiss,Alert.prototype.close)})}(window.jQuery);!function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state=state+"Text";data.resetText||$el.data("resetText",$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)};Button.prototype.toggle=function(){var $parent=this.$element.parent('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active");this.$element.toggleClass("active")};$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options=typeof option=="object"&&option;if(!data)$this.data("button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.button.defaults={loadingText:"loading..."};$.fn.button.Constructor=Button;$(function(){$("body").on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");$btn.button("toggle")
})})}(window.jQuery);!function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.options.slide&&this.slide(this.options.slide);this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){if(!e)this.paused=false;if(this.interval)clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(pos>this.$items.length-1||pos<0)return;if(this.sliding){return this.$element.one("slid",function(){that.to(pos)})}if(activeIndex==pos){return this.pause().cycle()}return this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){if(!e)this.paused=true;if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(true)}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(type,next){if(!$.support.transition&&this.$element.hasClass("slide")){this.$element.find(".item").stop(true,true)}var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction=type=="next"?"left":"right",fallback=type=="next"?"first":"last",that=this,e=$.Event("slide",{relatedTarget:$next[0]});this.sliding=true;isCycling&&this.pause();$next=$next.length?$next:this.$element.find(".item")[fallback]();if($next.hasClass("active"))return;if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})}if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented()){this.sliding=false;return}$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},0)})}else if(!$.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented()){this.sliding=false;return}if(this.$element.hasClass("vertical")){$active.animate({top:direction=="right"?"100%":"-100%"},600,function(){$active.removeClass("active");that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},0)});$next.addClass(type).css({top:direction=="right"?"-100%":"100%"}).animate({top:"0"},600,function(){$next.removeClass(type).addClass("active")})}else{$active.animate({left:direction=="right"?"100%":"-100%"},600,function(){$active.removeClass("active");that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},0)});$next.addClass(type).css({left:direction=="right"?"-100%":"100%"}).animate({left:"0"},600,function(){$next.removeClass(type).addClass("active")})}}else{this.$element.trigger(e);if(e.isDefaultPrevented()){this.sliding=false;return}$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger("slid")}isCycling&&this.cycle();return this}};$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,typeof option=="object"&&option),action=typeof option=="string"?option:options.slide;if(!data)$this.data("carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.cycle()})};$.fn.carousel.defaults={interval:false,pause:"hover"};$.fn.carousel.Constructor=Carousel;$(function(){$("body").on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=!$target.data("modal")&&$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");$target.carousel(options);if(slideIndex=$this.attr("data-slide-to")){$target.data("carousel").to(slideIndex)}e.preventDefault()})})}(window.jQuery);!function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.collapse.defaults,options);if(this.options.parent){this.$parent=$(this.options.parent)}this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(this.transitioning)return;dimension=this.dimension();scroll=$.camelCase(["scroll",dimension].join("-"));actives=this.$parent&&this.$parent.find("> .accordion-group > .in");if(actives&&actives.length){hasData=actives.data("collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide");hasData||actives.data("collapse",null)}this.$element[dimension](0);this.transition("addClass",$.Event("show"),"shown");$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension;if(this.transitioning)return;dimension=this.dimension();this.reset(this.$element[dimension]());this.transition("removeClass",$.Event("hide"),"hidden");this.$element[dimension](0)},reset:function(size){var dimension=this.dimension();this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth;this.$element[size!==null?"addClass":"removeClass"]("collapse");return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=="show")that.reset();that.transitioning=0;that.$element.trigger(completeEvent)};this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;this.transitioning=1;this.$element[method]("in");$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this.$element.siblings(".collapse.in").collapse("hide");this[this.$element.hasClass("in")?"hide":"show"]()}};$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=typeof option=="object"&&option;if(!data)$this.data("collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})};$.fn.collapse.defaults={toggle:true};$.fn.collapse.Constructor=Collapse;$(function(){$("body").on("click.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href,target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed");$(target).collapse(option)})})}(window.jQuery);!function($){"use strict";var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive;if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");clearMenus();if(!isActive){$parent.toggleClass("open");$this.focus()}return false},keydown:function(e){var $this,$items,$active,$parent,isActive,index;if(!/(38|40|27)/.test(e.keyCode))return;$this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");if(!isActive||isActive&&e.keyCode==27)return $this.click();$items=$("[role=menu] li:not(.divider) a",$parent);if(!$items.length)return;index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).focus()}};function clearMenus(){getParent($(toggle)).removeClass("open")}function getParent($this){var selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);$parent.length||($parent=$this.parent());return $parent}$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");if(!data)$this.data("dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})};$.fn.dropdown.Constructor=Dropdown;$(function(){$("html").on("click.dropdown.data-api touchstart.dropdown.data-api",clearMenus);$("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)})}(window.jQuery);!function($){"use strict";var Modal=function(element,options){this.options=options;this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;$("body").addClass("modal-open");this.isShown=true;this.escape();this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(document.body)}that.$element.show();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in").attr("aria-hidden",false).focus();that.enforceFocus();transition?that.$element.one($.support.transition.end,function(){that.$element.trigger("shown")}):that.$element.trigger("shown")})},hide:function(e){e&&e.preventDefault();var that=this;e=$.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;$("body").removeClass("modal-open");this.escape();$(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length){that.$element.focus()}})},escape:function(){var that=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&that.hide()})}else if(!this.isShown){this.$element.off("keyup.dismiss.modal")}},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideModal()})},hideModal:function(that){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);if(this.options.backdrop!="static"){this.$backdrop.click($.proxy(this.hide,this))}if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,$.proxy(this.removeBackdrop,this)):this.removeBackdrop()}else if(callback){callback()}}};$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("modal",data=new Modal(this,options));if(typeof option=="string")data[option]();else if(options.show)data.show()})};$.fn.modal.defaults={backdrop:true,keyboard:true,show:true};$.fn.modal.Constructor=Modal;$(function(){$("body").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option).one("hide",function(){$this.focus()})})})}(window.jQuery);!function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;if(this.options.trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(this.options.trigger!="manual"){eventIn=this.options.trigger=="hover"?"mouseenter":"focus";eventOut=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,options,this.$element.data());if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,inside,pos,actualWidth,actualHeight,placement,tp;if(this.hasContent()&&this.enabled){$tip=this.tip();this.setContent();if(this.options.animation){$tip.addClass("fade")}placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;inside=/in/.test(placement);$tip.remove().css({top:0,left:0,display:"block"}).appendTo(inside?this.$element:document.body);pos=this.getPosition(inside);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(inside?placement.split(" ")[1]:placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}$tip.css(tp).addClass(placement).addClass("in")}},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip();$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).remove()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.remove()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.remove();return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(inside){return $.extend({},inside?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"bottom",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:true}}(window.jQuery);!function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content > *")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;content=$e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content);return content},tip:function(){if(!this.$tip){this.$tip=$(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option=="object"&&option;if(!data)$this.data("popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function($){"use strict";function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element),href;this.options=$.extend({},$.fn.scrollspy.defaults,options);this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process);this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=$("body");this.refresh();this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=this,$targets;this.offsets=$([]);this.targets=$([]);$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll){return activeTarget!=(i=targets.last()[0])&&this.activate(i)}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])}},activate:function(target){var active,selector;this.activeTarget=target;$(this.selector).parent(".active").removeClass("active");selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';active=$(selector).parent("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate")}};$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options=typeof option=="object"&&option;if(!data)$this.data("scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.defaults={offset:10};$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery);!function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;previous=$ul.find(".active a").last()[0];e=$.Event("show",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;$target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");element.addClass("active");if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu")){element.closest("li.dropdown").addClass("active")}callback&&callback()}transition?$active.one($.support.transition.end,next):next();$active.removeClass("in")}};$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");if(!data)$this.data("tab",data=new Tab(this));if(typeof option=="string")data[option]()})};$.fn.tab.Constructor=Tab;$(function(){$("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();$(this).tab("show")})})}(window.jQuery);!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.typeahead.defaults,options);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=$(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=false;this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(val)).change();return this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:pos.top+pos.height,left:pos.left});this.$menu.show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(event){var items;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source;return items?this.process(items):this},process:function(items){var that=this;items=$.grep(items,function(item){return that.matcher(item)});items=this.sorter(items);if(!items.length){return this.shown?this.hide():this}return this.render(items.slice(0,this.options.items)).show()},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){var beginswith=[],caseSensitive=[],caseInsensitive=[],item;while(item=items.shift()){if(!item.toLowerCase().indexOf(this.query.toLowerCase()))beginswith.push(item);else if(~item.indexOf(this.query))caseSensitive.push(item);else caseInsensitive.push(item)}return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;items=$(items).map(function(i,item){i=$(that.options.item).attr("data-value",item);i.find("a").html(that.highlighter(item));return i[0]});items.first().addClass("active");this.$menu.html(items);return this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();if(!next.length){next=$(this.$menu.find("li")[0])}next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();if(!prev.length){prev=this.$menu.find("li").last()}prev.addClass("active")},listen:function(){this.$element.on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this));if($.browser.webkit||$.browser.msie){this.$element.on("keydown",$.proxy(this.keydown,this))}this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();this.prev();break;case 40:e.preventDefault();this.next();break}e.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=!~$.inArray(e.keyCode,[40,38,9,13,27]);this.move(e)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation();e.preventDefault()},blur:function(e){var that=this;setTimeout(function(){that.hide()},150)},click:function(e){e.stopPropagation();e.preventDefault();this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active");$(e.currentTarget).addClass("active")}};$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options=typeof option=="object"&&option;if(!data)$this.data("typeahead",data=new Typeahead(this,options));if(typeof option=="string")data[option]()})};$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};$.fn.typeahead.Constructor=Typeahead;$(function(){$("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);if($this.data("typeahead"))return;e.preventDefault();$this.typeahead($this.data())})})}(window.jQuery);!function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options);this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this));this.$element=$(element);this.checkPosition()};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom",affix;if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top();if(typeof offsetBottom=="function")offsetBottom=offset.bottom();affix=this.unpin!=null&&scrollTop+this.unpin<=position.top?false:offsetBottom!=null&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":offsetTop!=null&&scrollTop<=offsetTop?"top":false;if(this.affixed===affix)return;this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:""))};$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options=typeof option=="object"&&option;if(!data)$this.data("affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})};$.fn.affix.Constructor=Affix;$.fn.affix.defaults={offset:0};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{};data.offsetBottom&&(data.offset.bottom=data.offsetBottom);data.offsetTop&&(data.offset.top=data.offsetTop);$spy.affix(data)})})}(window.jQuery);(function($){$.fn.yiiListView=function(options){return this.each(function(){var settings=$.extend({},$.fn.yiiListView.defaults,options||{}),$this=$(this),id=$this.attr("id");if(settings.updateSelector==undefined){settings.updateSelector="#"+id+" ."+settings.pagerClass.replace(/\s+/g,".")+" a, #"+id+" ."+settings.sorterClass.replace(/\s+/g,".")+" a"}$.fn.yiiListView.settings[id]=settings;if(settings.ajaxUpdate.length>0){$("body").on("click.yiiListView",settings.updateSelector,function(){if($("#"+id).hasClass(settings.loadingClass))return false;var doUpdate=false;if(settings.enableHistory&&window.History.enabled&&$(this).hasClass("history")){var url=$(this).attr("href");if(!url)return false;if(url.indexOf("?")===-1)url+="?";var params=$.deparam.querystring(url);delete params[settings.ajaxVar];try{window.History.pushState({ajax:true},null,$.param.querystring(url.substr(0,url.indexOf("?")),params))}catch(err){doUpdate=true}}else{doUpdate=true}if(doUpdate)$.fn.yiiListView.update(id,{url:$(this).data("href")?$(this).data("href"):$(this).attr("href")});return false})}if(settings.enableHistory&&settings.ajaxUpdate!==false&&window.History.enabled){$(window).bind("statechange",function(){var State=window.History.getState();if(typeof State.data.ajax!=="undefined"&&State.data.ajax)$.fn.yiiListView.update(id,{url:State.url})})}})};$.fn.yiiListView.defaults={ajaxUpdate:[],ajaxVar:"ajax",pagerClass:"pager",loadingClass:"loading",sorterClass:"sorter"};$.fn.yiiListView.settings={};$.fn.yiiListView.getKey=function(id,index){return $("#"+id+" > div.keys > span:eq("+index+")").text()};$.fn.yiiListView.getUrl=function(id){var settings=$.fn.yiiListView.settings[id];return settings.url||$("#"+id+" > div.keys").attr("title")};$.fn.yiiListView.update=function(id,options){var settings=$.fn.yiiListView.settings[id];if($("#"+id).hasClass(settings.loadingClass))return;var silent=options&&"tnsilent"in options?options["tnsilent"]:false;var ajaxUpdateTimer=0;if(!silent)ajaxUpdateTimer=setTimeout(function(){try{$("#loading").modal("show")}catch(err){}},4e3);$("#"+id).addClass(settings.loadingClass);options=$.extend({type:"GET",url:$.fn.yiiListView.getUrl(id),success:function(data,status,xhr){try{window.clearTimeout(ajaxUpdateTimer);$("#loading").modal("hide")}catch(err){}if(xhr.getResponseHeader("content-type")==="application/json")jQuery.tn.jsonAjaxUpdate(data,status,xhr);else{try{jQuery.tn.refreshList(["pre-update"])}catch(err){}var $data=$("<div>"+data+"</div>");
$.each(settings.ajaxUpdate,function(i,v){var id="#"+v;var ctn=$(id,$data);if(ctn.html())$(id).replaceWith(ctn)});if(settings.afterAjaxUpdate!=undefined)settings.afterAjaxUpdate(id,data)}$("#"+id).removeClass(settings.loadingClass)},error:function(XMLHttpRequest,textStatus,errorThrown){$("#"+id).removeClass(settings.loadingClass);try{window.clearTimeout(ajaxUpdateTimer);$("#loading").modal("hide")}catch(err){}}},options||{});if(options.data!=undefined&&options.type=="GET"){options.url=$.param.querystring(options.url,options.data);options.data={}}options.url=$.param.querystring(options.url,settings.ajaxVar+"="+id);if(settings.beforeAjaxUpdate!=undefined)settings.beforeAjaxUpdate(id);$.ajax(options);if(typeof ga==="function")ga("send","pageview",options.url)}})(jQuery);(function($){$.yii={version:"1.0",submitForm:function(element,url,params){var f=$(element).parents("form")[0];if(!f){f=document.createElement("form");f.style.display="none";element.parentNode.appendChild(f);f.method="POST"}if(typeof url=="string"&&url!=""){f.action=url}if(element.target!=null){f.target=element.target}var inputs=[];$.each(params,function(name,value){var input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("name",name);input.setAttribute("value",value);f.appendChild(input);inputs.push(input)});$(f).data("submitObject",$(element));$(f).trigger("submit");$.each(inputs,function(){f.removeChild(this)})}}})(jQuery);(function($,window){"$:nomunge";var undefined,aps=Array.prototype.slice,decode=decodeURIComponent,jq_param=$.param,jq_param_fragment,jq_deparam,jq_deparam_fragment,jq_bbq=$.bbq=$.bbq||{},jq_bbq_pushState,jq_bbq_getState,jq_elemUrlAttr,jq_event_special=$.event.special,str_hashchange="hashchange",str_querystring="querystring",str_fragment="fragment",str_elemUrlAttr="elemUrlAttr",str_location="location",str_href="href",str_src="src",re_trim_querystring=/^.*\?|#.*$/g,re_trim_fragment=/^.*\#/,re_no_escape,elemUrlAttr_cache={};function is_string(arg){return typeof arg==="string"}function curry(func){var args=aps.call(arguments,1);return function(){return func.apply(this,args.concat(aps.call(arguments)))}}function get_fragment(url){return url.replace(/^[^#]*#?(.*)$/,"$1")}function get_querystring(url){return url.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function jq_param_sub(is_fragment,get_func,url,params,merge_mode){var result,qs,matches,url_params,hash;if(params!==undefined){matches=url.match(is_fragment?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);hash=matches[3]||"";if(merge_mode===2&&is_string(params)){qs=params.replace(is_fragment?re_trim_fragment:re_trim_querystring,"")}else{url_params=jq_deparam(matches[2]);params=is_string(params)?jq_deparam[is_fragment?str_fragment:str_querystring](params):params;qs=merge_mode===2?params:merge_mode===1?$.extend({},params,url_params):$.extend({},url_params,params);qs=jq_param(qs);if(is_fragment){qs=qs.replace(re_no_escape,decode)}}result=matches[1]+(is_fragment?"#":qs||!matches[1]?"?":"")+qs+hash}else{result=get_func(url!==undefined?url:window[str_location][str_href])}return result}jq_param[str_querystring]=curry(jq_param_sub,0,get_querystring);jq_param[str_fragment]=jq_param_fragment=curry(jq_param_sub,1,get_fragment);jq_param_fragment.noEscape=function(chars){chars=chars||"";var arr=$.map(chars.split(""),encodeURIComponent);re_no_escape=new RegExp(arr.join("|"),"g")};jq_param_fragment.noEscape(",/");$.deparam=jq_deparam=function(params,coerce){var obj={},coerce_types={"true":!0,"false":!1,"null":null};$.each(params.replace(/\+/g," ").split("&"),function(j,v){var param=v.split("="),key=decode(param[0]),val,cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])){keys[keys_last]=keys[keys_last].replace(/\]$/,"");keys=keys.shift().split("[").concat(keys);keys_last=keys.length-1}else{keys_last=0}if(param.length===2){val=decode(param[1]);if(coerce){val=val&&!isNaN(val)?+val:val==="undefined"?undefined:coerce_types[val]!==undefined?coerce_types[val]:val}if(keys_last){for(;i<=keys_last;i++){key=keys[i]===""?cur.length:keys[i];cur=cur[key]=i<keys_last?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val}}else{if($.isArray(obj[key])){obj[key].push(val)}else if(obj[key]!==undefined){obj[key]=[obj[key],val]}else{obj[key]=val}}}else if(key){obj[key]=coerce?undefined:""}});return obj};function jq_deparam_sub(is_fragment,url_or_params,coerce){if(url_or_params===undefined||typeof url_or_params==="boolean"){coerce=url_or_params;url_or_params=jq_param[is_fragment?str_fragment:str_querystring]()}else{url_or_params=is_string(url_or_params)?url_or_params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):url_or_params}return jq_deparam(url_or_params,coerce)}jq_deparam[str_querystring]=curry(jq_deparam_sub,0);jq_deparam[str_fragment]=jq_deparam_fragment=curry(jq_deparam_sub,1);$[str_elemUrlAttr]||($[str_elemUrlAttr]=function(obj){return $.extend(elemUrlAttr_cache,obj)})({a:str_href,base:str_href,iframe:str_src,img:str_src,input:str_src,form:"action",link:str_href,script:str_src});jq_elemUrlAttr=$[str_elemUrlAttr];function jq_fn_sub(mode,force_attr,params,merge_mode){if(!is_string(params)&&typeof params!=="object"){merge_mode=params;params=force_attr;force_attr=undefined}return this.each(function(){var that=$(this),attr=force_attr||jq_elemUrlAttr()[(this.nodeName||"").toLowerCase()]||"",url=attr&&that.attr(attr)||"";that.attr(attr,jq_param[mode](url,params,merge_mode))})}$.fn[str_querystring]=curry(jq_fn_sub,str_querystring);$.fn[str_fragment]=curry(jq_fn_sub,str_fragment);jq_bbq.pushState=jq_bbq_pushState=function(params,merge_mode){if(is_string(params)&&/^#/.test(params)&&merge_mode===undefined){merge_mode=2}var has_args=params!==undefined,url=jq_param_fragment(window[str_location][str_href],has_args?params:{},has_args?merge_mode:2);window[str_location][str_href]=url+(/#/.test(url)?"":"#")};jq_bbq.getState=jq_bbq_getState=function(key,coerce){return key===undefined||typeof key==="boolean"?jq_deparam_fragment(key):jq_deparam_fragment(coerce)[key]};jq_bbq.removeState=function(arr){var state={};if(arr!==undefined){state=jq_bbq_getState();$.each($.isArray(arr)?arr:arguments,function(i,v){delete state[v]})}jq_bbq_pushState(state,2)};jq_event_special[str_hashchange]=$.extend(jq_event_special[str_hashchange],{add:function(handleObj){var old_handler;function new_handler(e){var hash=e[str_fragment]=jq_param_fragment();e.getState=function(key,coerce){return key===undefined||typeof key==="boolean"?jq_deparam(hash,key):jq_deparam(hash,coerce)[key]};old_handler.apply(this,arguments)}if($.isFunction(handleObj)){old_handler=handleObj;return new_handler}else{old_handler=handleObj.handler;handleObj.handler=new_handler}}})})(jQuery,this);(function($,window,undefined){"$:nomunge";var fake_onhashchange,jq_event_special=$.event.special,str_location="location",str_hashchange="hashchange",str_href="href",browser=$.browser,mode=document.documentMode,is_old_ie=browser.msie&&(mode===undefined||mode<8),supports_onhashchange="on"+str_hashchange in window&&!is_old_ie;function get_fragment(url){url=url||window[str_location][str_href];return url.replace(/^[^#]*#?(.*)$/,"$1")}$[str_hashchange+"Delay"]=100;jq_event_special[str_hashchange]=$.extend(jq_event_special[str_hashchange],{setup:function(){if(supports_onhashchange){return false}$(fake_onhashchange.start)},teardown:function(){if(supports_onhashchange){return false}$(fake_onhashchange.stop)}});fake_onhashchange=function(){var self={},timeout_id,iframe,set_history,get_history;function init(){set_history=get_history=function(val){return val};if(is_old_ie){iframe=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;get_history=function(){return get_fragment(iframe.document[str_location][str_href])};set_history=function(hash,history_hash){if(hash!==history_hash){var doc=iframe.document;doc.open().close();doc[str_location].hash="#"+hash}};set_history(get_fragment())}}self.start=function(){if(timeout_id){return}var last_hash=get_fragment();set_history||init();(function loopy(){var hash=get_fragment(),history_hash=get_history(last_hash);if(hash!==last_hash){set_history(last_hash=hash,history_hash);$(window).trigger(str_hashchange)}else if(history_hash!==last_hash){window[str_location][str_href]=window[str_location][str_href].replace(/#.*/,"")+"#"+history_hash}timeout_id=setTimeout(loopy,$[str_hashchange+"Delay"])})()};self.stop=function(){if(!iframe){timeout_id&&clearTimeout(timeout_id);timeout_id=0}};return self}()})(jQuery,this);(function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if(typeof c.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},typeof c.init!="undefined"&&c.init()})(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined")throw new Error("History.js Core has already been loaded...");m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0)},m.initCore=function(){if(typeof m.initCore.initialized!="undefined")return!1;m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];if(typeof i=="object"&&typeof k!="undefined")try{i=k.stringify(i)}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0]);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1)a+=":"+d.location.port;return a+="/",a},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"}),c},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined")b=m.stateToId[c];else if(typeof m.store.stateToId[c]!="undefined")b=m.store.stateToId[c];else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined")break}m.stateToId[c]=b,m.idToState[b]=a}}return b},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object")a={};if(typeof a.normalized!="undefined")return a;if(!a.data||typeof a.data!="object")a.data={};b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash,c},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){var c=b,d;for(;;){d=a.unescape(c);if(d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){typeof a!="undefined"?m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(m.busy.flag)return;for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0)continue;d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay)}};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;if(!m.isLastSavedState(b))c=b;else return;return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;c<=a;++c)m.forward(b);else{if(!(a<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b))continue;a.idToState[b]=m.idToState[b]}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b))continue;a.urlToId[b]=m.urlToId[b]}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b))continue;a.stateToId[b]=m.stateToId[b]}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})}},m.init()}(window);